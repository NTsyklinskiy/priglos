'use strict'; // let bg = document.querySelector('.container__heart--bg')
// window.addEventListener('scroll', function() {
//   bg.style.backgroundSize = `${100 + value}px`;
//   bg.style.opacity = `-${(100 + value * 2) / (100 + docValue[0].height * 2) - 1}`;
// })

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

class Component {
  constructor() {
    this.getElementToId();
    this.getBCR();
  }

  getElementToId(id) {
    let element;

    if (id === '') {
      element = window;
    } else {
      element = document.getElementById(id);
    }

    return element;
  }

  getBCR(el, param) {// const element = el.getBoundingClientRect()
    // if(param){
    // }
    // return element
  }

}

class App {
  static init() {
    const navHover = new Listeners('navigation', 'mouseover mouseout', '0.5 1');
    navHover.listenerHeader();
    const navClick = new Listeners('header', 'click');
    navClick.listenerHeader();
    const navScroll = new Listeners('', 'scroll', '.priglos');
    navScroll.listenerHeader();
  }

}

class Listeners extends Component {
  constructor(id, type, param) {
    super();
    this.id = id;
    this.type = type;
    this.param = param;
  }

  navHover(ob, e) {
    // console.log(ob, e)
    if (e.target.classList.contains('navigation__link')) {
      const link = e.target;
      const siblings = link.closest('.navigation__items').querySelectorAll('.navigation__link');
      siblings.forEach(el => {
        if (el !== link) {
          el.style.opacity = ob;
        }
      });
    }
  }

  navClick(ob, e) {
    e.preventDefault();
    const elAll = document.querySelectorAll('.navigation__link');
    const elRect = [];

    for (const el of elAll) {
      const attr = el.getAttribute('href');

      if (attr) {
        const rect = document.querySelector(attr).getBoundingClientRect();
        elRect.push([attr, rect]);
      }
    }

    elRect.forEach(elR => {
      if (e.target.getAttribute('href') === elR[0]) {
        window.scrollTo({
          left: elR[1].left + window.pageXOffset,
          top: elR[1].top + window.pageYOffset,
          behavior: 'smooth'
        });
      }
    });
  }

  navScroll(id, param, e) {
    console.log(id, param);
    const value = window.scrollY;
    const docValue = document.getElementById(id).offsetTop;
    const elHeart = document.querySelector(param);
    console.log(value, docValue, elHeart); // console.log(document.querySelector('.priglos__title:befor')); 

    if (value > docValue) elHeart.classList.add('focus');
  }

  listHeandler() {
    this.type.split(' ').forEach(t => {
      if (t === 'mouseover') {
        el.addEventListener(t, this.navHover.bind(null, this.param.split(' ')[0]));
      } else if (t === 'mouseout') {
        el.addEventListener(t, this.navHover.bind(null, this.param.split(' ')[1]));
      } else if (t === 'click') {
        el.addEventListener(t, this.navClick.bind(null, this));
      } else if (t === 'scroll') {
        console.log();
        el.addEventListener('scroll', this.navScroll.bind(null, this.param));
      }
    });
  }

  handler() {
    const el = this.getElementToId(this.id);
    this.listenerHeader();
  }

}

class Timer {
  static startLogOutTimer() {
    const tick = () => {
      const labelTimer = document.querySelector(this.id),
            labelSec = labelTimer.querySelector('.seconds span '),
            labelMin = labelTimer.querySelector('.minuts span '),
            labelHours = labelTimer.querySelector('.hours span '),
            labelDays = labelTimer.querySelector('.days span '),
            time = Date.parse(this.endtime) - Date.parse(new Date()),
            sec = String(Math.floor(time / 1000 % 60)).padStart(2, 0),
            min = String(Math.floor(time / 1000 / 60 % 60)).padStart(2, 0),
            hours = String(Math.floor(time / (1000 * 60 * 60) % 24)).padStart(2, 0),
            days = String(Math.floor(time / (1000 * 60 * 60 * 24))).padStart(2, 0);
      labelSec.textContent = sec;
      labelMin.textContent = min;
      labelHours.textContent = hours;
      labelDays.textContent = days;

      if (time === 0) {
        clearInterval(timer);
      }
    };

    tick();
    const timer = setInterval(tick, 1000);
    return timer;
  }

}

_defineProperty(Timer, "endtime", new Date('2021-06-10:15:00'));

_defineProperty(Timer, "id", '#timer');

Timer.startLogOutTimer();
App.init(); // importNode(element, true)   cloneNode(true) replaceWith 
// window.addEventListener('scroll', (e)=> {
//   console.log('Current scroll (X/Y', window.pageYOffset,window.scrollY);
//   // console.log(elHeart)
// })